os:
  - linux
  - osx

before_install:
  - mkdir obj
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo add-apt-repository -y ppa:nschloe/boost-nightly; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo apt-get update -qq; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install boost; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install g++; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install clang; fi

addons: 
  apt: 
    sources:
      - sourceline: 'ppa:mhier/libboost-latest'
      - ubuntu-toolchain-r-test
    packages: 
      - g++-6
      - clang-3.8
      - boost1.67

compiler: 
  - gcc
  - clang
  
install: 
  - "[ $CXX = g++ ] && export CXX=g++-6 || true"
  - "[ $CXX = clang++ ] && export CXX=clang++-3.8 || true"

language: cpp

script: 
  - make
  - make script

sudo: false
